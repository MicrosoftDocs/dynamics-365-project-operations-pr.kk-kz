---
title: Шығынды басқару интеграциясы
description: Бұл тақырып қос жазу арқылы Project Operations жүйесіндегі шығын есебін біріктіру туралы ақпарат береді.
author: sigitac
ms.date: 04/28/2021
ms.topic: article
ms.prod: ''
ms.service: project-operations
ms.reviewer: kfend
ms.author: sigitac
ms.openlocfilehash: 8c347f14f3a479eb4aec951cfe4094c5581bce32
ms.sourcegitcommit: 02f00960198cc78a5e96955a9e4390c2c6393bbf
ms.translationtype: HT
ms.contentlocale: kk-KZ
ms.lasthandoff: 04/28/2021
ms.locfileid: "5955785"
---
# <a name="expense-management-integration"></a><span data-ttu-id="33ad4-103">Шығынды басқару интеграциясы</span><span class="sxs-lookup"><span data-stu-id="33ad4-103">Expense management integration</span></span>

<span data-ttu-id="33ad4-104">_**Қолданылады:** Ресурс/биржадан тыс негіздегі сценарийлерге арналған Project Operations_</span><span class="sxs-lookup"><span data-stu-id="33ad4-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="33ad4-105">Бұл тақырып қос жазу арқылы Project Operations жүйесінің [толық шығынын орналастыру](../expense/expense-overview.md) ішіндегі шығын туралы есептерді біріктіру туралы ақпарат береді.</span><span class="sxs-lookup"><span data-stu-id="33ad4-105">This topic provides information about expense reports integration in Project Operations [full expense deployment](../expense/expense-overview.md) using dual-write.</span></span>

## <a name="expense-categories"></a><span data-ttu-id="33ad4-106">Шығын санаттары</span><span class="sxs-lookup"><span data-stu-id="33ad4-106">Expense categories</span></span>

<span data-ttu-id="33ad4-107">Толық шығын орналастыруында шығын санаттары Finance and Operations бағдарламаларында жасалып, сақталады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-107">In a full expense deployment, expense categories are created and maintained in Finance and Operations apps.</span></span> <span data-ttu-id="33ad4-108">Жаңа шығын санатын жасау үшін келесі әрекеттерді орындаңыз:</span><span class="sxs-lookup"><span data-stu-id="33ad4-108">To create a new expense category, complete the following steps:</span></span>

1. <span data-ttu-id="33ad4-109">Microsoft Dataverse бағдарламасында **Транзакция** санатын жасаңыз.</span><span class="sxs-lookup"><span data-stu-id="33ad4-109">In Microsoft Dataverse, create a **Transaction** category.</span></span> <span data-ttu-id="33ad4-110">Қос жазу интеграциясы бұл транзакция санатын Finance and Operations бағдарламаларына синхрондайды.</span><span class="sxs-lookup"><span data-stu-id="33ad4-110">Dual-write integration will synchronize this transaction category to Finance and Operations apps.</span></span> <span data-ttu-id="33ad4-111">Қосымша ақпарат алу үшін [Жоба санаттарын конфигурациялау](/dynamics365/project-operations/project-accounting/configure-project-categories) және [Project Operations параметрі мен конфигурациясы деректерін біріктіру](resource-dual-write-setup-integration.md) тақырыптарын қараңыз.</span><span class="sxs-lookup"><span data-stu-id="33ad4-111">For more information, see [Configure project categories](/dynamics365/project-operations/project-accounting/configure-project-categories) and [Project Operations setup and configuration data integration](resource-dual-write-setup-integration.md).</span></span> <span data-ttu-id="33ad4-112">Осы интеграция нәтижесінде жүйе Finance and Operations бағдарламаларында төрт ортақ пайдаланылатын санат жазбаларын жасайды.</span><span class="sxs-lookup"><span data-stu-id="33ad4-112">As a result of this integration, the system creates four shared category records in Finance and Operations apps.</span></span>
2. <span data-ttu-id="33ad4-113">Finance бағдарламасында **Шығындарды басқару** > **Орнату** > **Ортақ санаттар** терезесіне өтіп, **Шығын** транзакция класымен ортақ санатты таңдаңыз.</span><span class="sxs-lookup"><span data-stu-id="33ad4-113">In Finance, go to **Expense management** > **Setup** > **Shared categories** and select a shared category with an **Expense** transaction class.</span></span> <span data-ttu-id="33ad4-114">**Шығында пайдалануға болатын** параметрін **Шын** мәніне орнатып, пайдаланылатын шығын түрін анықтаңыз.</span><span class="sxs-lookup"><span data-stu-id="33ad4-114">Set the **Can be used in Expense** parameter to **True** and define the expense type to use.</span></span>
3. <span data-ttu-id="33ad4-115">Осы ортақ санат жазбасын пайдалану арқылы **Шығынды басқару** > **Орнату** > **Шығын санаттары** терезесіне өтіп, **Жаңа** опциясын таңдау арқылы жаңа шығын санатын жасаңыз.</span><span class="sxs-lookup"><span data-stu-id="33ad4-115">Using this shared category record, create a new expense category by going to **Expense management** > **Setup** > **Expense categories** and selecting **New**.</span></span> <span data-ttu-id="33ad4-116">Жазба сақталғанда қос жазу осы жазбаны Dataverse платформасына синхрондау үшін **Project Operations интеграция жобасының шығын санаттарын экспорттау нысаны (msdyn\_expensecategories)** кесте картасын пайдаланады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-116">When the record is saved, dual-write uses the table map, **Project Operations integration project expense categories export entity (msdyn\_expensecategories)** to synchronize this record to Dataverse.</span></span>

  ![Шығын санаттарының интеграциясы](./media/DW6ExpenseCategories.png)

<span data-ttu-id="33ad4-118">Finance and Operations бағдарламаларындағы шығын санаттары компанияға немесе заңды нысанға арналған.</span><span class="sxs-lookup"><span data-stu-id="33ad4-118">Expense categories in Finance and Operations apps are company- or legal entity-specific.</span></span> <span data-ttu-id="33ad4-119">Dataverse платформасында жеке, тиісті заңды нысанға арналған жазбалар бар.</span><span class="sxs-lookup"><span data-stu-id="33ad4-119">There are separate, corresponding legal entity-specific records in Dataverse.</span></span> <span data-ttu-id="33ad4-120">Жоба менеджері шығындарды бағалаған кезде, олар жұмыс істеп жатқан жобаға иелік ететін компанияға қарағанда басқа компанияға тиесілі жоба үшін құрылған шығындар санаттарын таңдай алмайды.</span><span class="sxs-lookup"><span data-stu-id="33ad4-120">When a project manager estimates expenses, they can’t select expense categories that were created for a project that is owned by a different company than the company that owns the project they are working on.</span></span> 

## <a name="expense-reports"></a><span data-ttu-id="33ad4-121">Шығындар туралы есептер</span><span class="sxs-lookup"><span data-stu-id="33ad4-121">Expense reports</span></span>

<span data-ttu-id="33ad4-122">Шығындар туралы есептер Finance and Operations бағдарламаларында жасалып, расталады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-122">Expense reports are created and approved in Finance and Operations apps.</span></span> <span data-ttu-id="33ad4-123">Қосымша ақпарат алу үшін [Dynamics 365 Project Operations бағдарламасындағы шығындар туралы есептерді жасау және өңдеу](/learn/modules/create-process-expense-reports/) бөлімін қараңыз.</span><span class="sxs-lookup"><span data-stu-id="33ad4-123">For more information, see [Create and process expense reports in Dynamics 365 Project Operations](/learn/modules/create-process-expense-reports/).</span></span> <span data-ttu-id="33ad4-124">Жоба менеджері шығындар туралы есепті бекіткеннен кейін, ол бас кітапқа орналастырылады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-124">After the expense report is approved by the Project manager, it's posted to the general ledger.</span></span> <span data-ttu-id="33ad4-125">Project Operations бағдарламасында жобаға қатысты шығын туралы есеп жолдары орналастырудың арнайы ережелері пайдалану арқылы орналастырылады:</span><span class="sxs-lookup"><span data-stu-id="33ad4-125">In Project Operations, project-related expense report lines are posted using special posting rules:</span></span>

  - <span data-ttu-id="33ad4-126">Жобаға қатысты шығындар (қалпына келтірілмейтін салықты қосқанда) дереу жобаның өзіндік құнды есепке алу шотына енгізілмейді, бірақ оның орнына шығындарды біріктіру шотына орналастырылады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-126">Project-related cost (including non-recoverable tax) is not immediately posted to project cost account in general ledger, but instead is posted to expense integration account.</span></span> <span data-ttu-id="33ad4-127">Бұл шот **Dynamics 365 Customer Engagement бағдарламасындағы Project Operations** қойыншасындағы **Жобаларды басқару және есеп** > **Параметр** > **Жобаларды басқару және есеп параметрлері** терезесінде конфигурацияланады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-127">This account is configured in **Project management and accounting** > **Setup** > **Project management and accounting parameters**, **Project Operations on Dynamics 365 Customer engagement** tab.</span></span>
  - <span data-ttu-id="33ad4-128">Қос жазу **Project Operations интеграциясы жобасының шығындарын экспорттау нысаны (msdyn\_expenses)** кесте картасы арқылы Dataverse платформасына синхрондалады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-128">Dual-write synchronizes to Dataverse using **Project Operations integration project expenses export entity (msdyn\_expenses)** table map.</span></span>
  - <span data-ttu-id="33ad4-129">Салық бойынша қосалқы журнал, жеткізушінің қосалқы журналы және тағы басқа қаржылық хабарландырулар шығын туралы есепті орналастырылу кезінде жарамды ретінде жазылады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-129">Tax subledger, vendor subledger, and other financial postings are recorded as applicable at the time of expense report posting.</span></span>

  ![Шығын туралы есептер интеграциясы](./media/DW6ExpenseReports.png)

<span data-ttu-id="33ad4-131">Жазба Dataverse платформасында **Шығын** нысанына жазылғанда жүйе жазбаның автоматты растау процесін іске қосады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-131">When a record is written to the **Expense** entity in Dataverse, the system triggers the automated approval process of the record.</span></span> <span data-ttu-id="33ad4-132">Қажет болса, автоматты растау процесінің күйін **Кеңейтілген параметрлер** > **Жүйе** > **Жүйелік тапсырмалар** терезесіне өту арқылы Dataverse бағдарламасында қарап шығуға болады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-132">If needed, the automated approval process status can be reviewed in Dataverse by going to **Advanced settings** > **System** > **System jobs**.</span></span> <span data-ttu-id="33ad4-133">Растау аяқталғаннан кейін жүйе **Нақты көрсеткіштер** нысанында шығын транзакциясы класының жазбалары жасалады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-133">After approval is complete, expense transaction class records are created in the **Actuals** entity.</span></span>

<span data-ttu-id="33ad4-134">Содан кейін шығынға қатысты нақты көрсеткіштер **Project Operations интеграциясының нақты көрсеткіштері (msdyn\_actuals)** қос жазу кесте картасы арқылы өңделеді.</span><span class="sxs-lookup"><span data-stu-id="33ad4-134">Expense related actuals are then processed using the dual-write table map **Project Operations integration actuals (msdyn\_actuals)**.</span></span> <span data-ttu-id="33ad4-135">Қосымша ақпарат алу үшін [Жобалық болжамдар мен нақты көрсеткіштер](resource-dual-write-estimates-actuals.md) тақырыбын қараңыз.</span><span class="sxs-lookup"><span data-stu-id="33ad4-135">For more information, see [Project estimates and actuals](resource-dual-write-estimates-actuals.md).</span></span>

<span data-ttu-id="33ad4-136">**Импорттың аралық пішіні** мерзімді процесі Project Operations интеграция журналында шығын туралы есепке қатысты журнал жолдарын жасайды.</span><span class="sxs-lookup"><span data-stu-id="33ad4-136">The periodic process, **Import from staging** creates Expense report-related journal lines in the Project Operations Integration journal.</span></span> <span data-ttu-id="33ad4-137">Өзара есеп айырысу шоты әдепкі бойынша шығынды біріктіру шоты болып табылады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-137">The offset account defaults to the expense integration account.</span></span> <span data-ttu-id="33ad4-138">Орналастыру интеграциясы журналы шығын транзакциясы үшін шоттағы қалдықты жойып, шығын сомасын жоба құны шотына ауыстырады.</span><span class="sxs-lookup"><span data-stu-id="33ad4-138">The Posting integration journal clears the account balance for the expense transaction and moves the expense amount to the project cost account.</span></span> <span data-ttu-id="33ad4-139">Жүйе сондай-ақ жобаның қосалқы журнал транзакцияларын сонымен қатар төменгі шот-фактура мен кірісті тану мақсаттарында жасайды.</span><span class="sxs-lookup"><span data-stu-id="33ad4-139">The system also creates project subledger transactions for downstream invoicing and revenue recognition purposes.</span></span>
